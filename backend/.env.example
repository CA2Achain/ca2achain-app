# =============================================
# CA2ACHAIN BACKEND ENVIRONMENT VARIABLES
# =============================================
# Copy this file to .env and fill in your actual values

# =============================================
# SERVER CONFIGURATION
# =============================================
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:3000

# =============================================
# SUPABASE CONFIGURATION (Database & Auth)
# =============================================
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key

# =============================================
# STRIPE CONFIGURATION (Payment Processing)
# =============================================
# Leave blank to use MOCK Stripe for development
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# Stripe Price IDs for dealer subscription tiers
STRIPE_TIER1_PRICE_ID=price_tier1_starter_100_queries
STRIPE_TIER2_PRICE_ID=price_tier2_business_1000_queries  
STRIPE_TIER3_PRICE_ID=price_tier3_enterprise_10000_queries

# =============================================
# RESEND CONFIGURATION (Email Service)
# =============================================
RESEND_API_KEY=re_your-resend-api-key

# =============================================
# PERSONA CONFIGURATION (Identity Verification)
# =============================================
# Leave blank to use MOCK Persona for development
PERSONA_API_KEY=persona_sandbox_your-persona-api-key
PERSONA_TEMPLATE_ID=itmpl_your-persona-template-id

# =============================================
# PRIVADO ID CONFIGURATION (Zero-Knowledge Proofs)
# =============================================
PRIVADO_ISSUER_DID=did:privado:polygon:mumbai:2qCU58EJgrELSyUqEWnvFYWLURfEuQLcHcUrNksHy7
PRIVADO_ISSUER_PRIVATE_KEY=your-privado-issuer-private-key
PRIVADO_RPC_URL=https://polygon-mumbai.g.alchemy.com/v2/your-alchemy-api-key
PRIVADO_VERIFIER_URL=https://verifier-mumbai.privado.id

# =============================================
# ENCRYPTION CONFIGURATION (PII Protection)
# =============================================
VAULT_ENCRYPTION_KEY_ID=550e8400-e29b-41d4-a716-446655440000

# =============================================
# POLYGON BLOCKCHAIN (Optional - for compliance records)
# =============================================
POLYGON_RPC_URL=https://polygon-mumbai.g.alchemy.com/v2/your-alchemy-api-key
POLYGON_PRIVATE_KEY=your-polygon-wallet-private-key
POLYGON_CONTRACT_ADDRESS=0x...your-deployed-contract-address

# =============================================
# EXAMPLE DEVELOPMENT VALUES
# =============================================
# Uncomment and modify these for quick development setup:

# SUPABASE_URL=https://abcdefghijklmnop.supabase.co
# SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTY0MjU0MjQwMCwiZXhwIjoxOTU4MTE4NDAwfQ.example
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjQyNTQyNDAwLCJleHAiOjE5NTgxMTg0MDB9.example

# STRIPE_SECRET_KEY=sk_test_51234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
# STRIPE_WEBHOOK_SECRET=whsec_1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
# STRIPE_TIER1_PRICE_ID=price_1234567890ABCDEFGHIJKLMN
# STRIPE_TIER2_PRICE_ID=price_2345678901BCDEFGHIJKLMNO  
# STRIPE_TIER3_PRICE_ID=price_3456789012CDEFGHIJKLMNOP

# RESEND_API_KEY=re_1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefgh

# PERSONA_API_KEY=persona_sandbox_1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefgh
# PERSONA_TEMPLATE_ID=itmpl_1234567890ABCDEFGHIJKLMN

# ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# =============================================
# SETUP INSTRUCTIONS
# =============================================
#
# 1. SUPABASE SETUP:
#    - Create project at supabase.com
#    - Get URL and keys from Settings > API
#    - Run migration: supabase/migrations/20250101000000_ca2achain_complete_schema.sql
#
# 2. STRIPE SETUP:
#    - Create account at stripe.com  
#    - Get API keys from Dashboard > Developers > API keys
#    - Create 3 subscription products/prices for dealer tiers
#    - Configure webhook endpoint: /webhooks/stripe
#
# 3. RESEND SETUP:
#    - Create account at resend.com
#    - Get API key from Dashboard > API Keys
#    - Verify your sending domain
#
# 4. PERSONA SETUP:
#    - Create account at withpersona.com
#    - Get API key from Dashboard > Developers
#    - Create identity verification template
#
# 5. PRIVADO ID SETUP:
#    - Set up Privado ID issuer node
#    - Generate issuer DID and private key
#    - Configure polygon mumbai testnet
#
# 6. ENCRYPTION KEY:
#    - Generate with: openssl rand -hex 32
#    - Keep this secret and secure!
#
# 7. TESTING:
#    - Run: npm run test:startup
#    - Start server: npm run dev
#    - Test: npm run test
#
# 8. MOCK SERVICES:
#    - Missing STRIPE_SECRET_KEY → Uses Mock Stripe
#    - Missing PERSONA_API_KEY → Uses Mock Persona  
#    - See MOCK_SERVICES.md for testing guide
#
# =============================================
# SECURITY NOTES
# =============================================
#
# - NEVER commit .env files to version control
# - Use different keys for development/staging/production
# - Rotate keys regularly in production
# - Store production keys in secure secret management
# - Use environment-specific Supabase projects
# - Enable row-level security in Supabase
# - Configure proper CORS for FRONTEND_URL
#
# =============================================